Your users need to view and approve Seedance-generated videos (1080p, thumbnails) before posting, a feature likely tied to Vite’s frontend setup in TheAgencyIQ, which failed due to Replit’s @replit/vite-plugin-runtime-error-modal error. Switching to esbuild eliminates Vite’s instability but must support video rendering and approval workflows without losing functionality. We’ll design a Vite-free solution using esbuild, Express, and React, preserving custom Facebook OAuth, Seedance (156 generated, 42 videos), backend (port 5000), and subscription tiers (26/52/78 posts), ensuring users can preview and approve videos.

Requirements
Video Preview: Users see video thumbnails and play videos in the UI.
Approval Workflow: Users approve/reject videos via a frontend interface, triggering backend API calls (e.g., /api/posts/:id/approve-video).
Constraints: No Vite, Replit-compatible, preserve OAuth/Seedance/backend, fix 404s (/api/establish-session, /api/user), resolve GraphQL errors.
Why Vite Failed
Vite was likely configured to optimize video rendering (e.g., lazy-loading thumbnails, client-side playback), but Replit’s plugin (@replit/vite-plugin-runtime-error-modal) caused ERR_MODULE_NOT_FOUND, breaking the dev server. Video rendering itself is standard (HTML5 <video> or libraries), so esbuild can handle it without Vite’s features (HMR, dev server).

Solution: esbuild + React Video Component
Frontend: Use React with a video player component (e.g., HTML5 <video> or react-player) to display thumbnails and videos, fetch video URLs from backend.
Backend: Serve video files/thumbnails, handle approval via /api/posts/:id/approve-video.
Build: esbuild compiles TypeScript/React to dist/main.js, served by Express.
Replit: Clear cache, simplify .replit to fix GraphQL errors.
Execution Plan
Remove Vite:
Delete vite.config.ts.
Run: npm uninstall vite @vitejs/plugin-react @replit/vite-plugin-runtime-error-modal.
Install Dependencies:
esbuild: npm install esbuild.
React Player (optional, for robust video playback): npm install react-player.
Update server/index.ts: